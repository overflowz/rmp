{"version":3,"file":"index.js","sources":["../src/core/interface.ts","../src/errors/TryCatchError.ts","../src/utils/tryCatch.ts","../src/errors/ResponseError.ts","../src/core/rmp.ts"],"sourcesContent":[null,null,null,null,null],"names":["PacketType","TryCatchError","Error","[object Object]","message","origin","super","this","name","captureStackTrace","err","tryCatch","fn","res","then","catch","from","ResponseError","DEBUG_NS","ULID","monotonicFactory","channel","adapter","Subject","onMessage","bind","request","broadcast","onRequest","onBroadcast","subClient","subscribeTo","instance","channelsUniq","Set","Promise","all","map","subscribe","d","debug","packet","JSON","parse","type","headers","correlationId","Request","responseChannel","Broadcast","messageStream$","next","pipe","filter","payload","isErrorResponse","Response","publish","pubClient","stringify","reject","resolve","timeoutMs","sendMessage$","defer","async","of","timeoutWith","throwError","mergeMap","combineLatest","getMessageStream","first","toPromise","onRequestCallback","callback","onRequestSubscription","unsubscribe","req","reply","onBroadcastCallback","onBroadcastSubscription","f","tap"],"mappings":"uOAUYA,UAAAA,EAAAA,qBAAAA,+CAEVA,2BACAA,mCCbmBC,UAAsBC,MAGzCC,YAAYC,EAAiBC,GAC3BC,MAAMF,GAENG,KAAKC,KAAO,gBAE2B,mBAA5BN,MAAMO,mBACfP,MAAMO,kBAAkBF,MAI5BJ,YAAYO,GACV,OAAO,IAAIT,EAAcS,EAAIN,QAASM,ICZ1C,MAAMC,EAAeC,IACnB,IACE,MAAMC,EAAWD,IAEjB,MAA4B,mBAAdC,GAAKC,KACfD,EAAIE,OAAOL,GAAaT,EAAce,KACtCN,aAAeR,MAAQQ,EAAM,IAAIR,MAAMQ,MAEvCG,EACJ,MAAOH,GACP,OAAOT,EAAce,KACnBN,aAAeR,MAAQQ,EAAM,IAAIR,MAAMQ,YCbxBO,UAAsBf,MACzCC,YAAYC,GACVE,MAAMF,GAENG,KAAKC,KAAO,gBAE2B,mBAA5BN,MAAMO,mBACfP,MAAMO,kBAAkBF,MAI5BJ,YAAYO,GACV,OAAO,IAAIO,EAAcP,EAAIN,UCSjC,MAAMc,EAAW,sBACXC,EAAOC,uCAcXjB,YACmBkB,EACAC,GADAf,aAAAc,EACAd,aAAAe,EAbXf,uBAAuC,OACvCA,yBAA2C,OAKlCA,oBAGZ,IAAIgB,UAMPhB,KAAKiB,UAAYjB,KAAKiB,UAAUC,KAAKlB,MAErCA,KAAKmB,QAAUnB,KAAKmB,QAAQD,KAAKlB,MACjCA,KAAKoB,UAAYpB,KAAKoB,UAAUF,KAAKlB,MACrCA,KAAKqB,UAAYrB,KAAKqB,UAAUH,KAAKlB,MACrCA,KAAKsB,YAActB,KAAKsB,YAAYJ,KAAKlB,MAEzCA,KAAKe,QAAQQ,UAAUN,UAAUjB,KAAKiB,WAGxCrB,sBAAqBkB,QAAEA,EAAOU,YAAEA,EAAWT,QAAEA,IAC3C,MAAMU,EAAW,IAAIzB,KAAKc,EAASC,GAE7BW,EAAe,IAAI,IAAIC,IAAI,CAACb,KAAYU,GAAe,MAK7D,aAJMI,QAAQC,IACZH,EAAaI,KAAKhB,GAAYC,EAAQQ,UAAUQ,UAAUjB,MAGrDW,EAGD7B,UAAUkB,EAAiBjB,GACjC,MAAMmC,EAAIC,UAAStB,EAAH,cAEVuB,EAAS9B,GAAiB,IAAM+B,KAAKC,MAAMvC,KACjD,GAAIqC,aAAkBvC,MACpB,YAAYqC,EAAE,iCAAkC,CAAEE,OAAAA,IAGpD,MAAMG,KAAEA,EAAIC,QAAEA,GAAYJ,OACM,IAArBzC,mBAAW4C,QAIgB,IAA3BC,GAASC,cAIhBF,IAAS5C,mBAAW+C,cAA+C,IAA7BF,GAASG,gBAI/CJ,IAAS5C,mBAAWiD,WAAa5B,IAAYd,KAAKc,QAItDd,KAAK2C,eAAeC,KAAK,CAAE9B,QAAAA,EAASoB,OAAAA,IAHtBF,EAAE,sCAJFA,EAAE,oDAAqD,CAAEE,OAAAA,IAJzDF,EAAE,iDAAkD,CAAEE,OAAAA,IAJtDF,EAAE,wBAAwBK,kBAAsB,CAAEH,OAAAA,EAAQG,KAAAA,IAkBlEzC,iBAAoBkB,GAC1B,OAAOd,KAAK2C,eAAeE,KACzBC,UAAOjD,GAAWA,EAAQiB,UAAYA,IACtCgB,OAAIjC,GAAWA,EAAQqC,UAInBtC,YAAoBuB,EAA4B4B,GACtD,MAAMf,EAAIC,UAAStB,EAAH,WACV4B,cAAEA,EAAaE,gBAAEA,GAAoBtB,EAAQmB,QAE7CA,EAAyB,CAC7BC,cAAAA,EACAS,gBAAiBD,aAAmBpD,OAGhCuC,EAAsC,CAC1CG,KAAM5C,mBAAWwD,SACjBX,QAAAA,EACAS,QAASA,aAAmBpD,MAAQoD,EAAQlD,QAAUkD,GAGlDG,QAAgB9C,GACpB,IAAMJ,KAAKe,QAAQoC,UAAUD,QAAQT,EAAiBN,KAAKiB,UAAUlB,MAGvE,OAAIgB,aAAmBvD,OACrBqC,EAAE,kCAAmC,CAAEE,OAAAA,EAAQgB,QAAAA,IACxCtB,QAAQyB,OAAOH,EAAQpD,SAGzB8B,QAAQ0B,UAGjB1D,gBAAmBmD,GACjB,MAAMf,EAAIC,UAAStB,EAAH,cAEV2B,EAAyB,CAC7BC,cAAe3B,KAGXsB,EAA6B,CACjCG,KAAM5C,mBAAWiD,UACjBJ,QAAAA,EACAS,QAAAA,GAGIG,QAAgB9C,GACpB,IAAMJ,KAAKe,QAAQoC,UAAUD,QAAQlD,KAAKc,QAASqB,KAAKiB,UAAUlB,MAGpE,OAAIgB,aAAmBvD,OACrBqC,EAAE,kCAAmC,CAAEE,OAAAA,EAAQgB,QAAAA,IACxCtB,QAAQyB,OAAOH,EAAQpD,SAGzB8B,QAAQ0B,UAGjB1D,QAAoCkB,EAAiBiC,EAAaQ,GAChE,MAAMvB,EAAIC,UAAStB,EAAH,YACV4B,EAAgB3B,IAEhB0B,EAAyB,CAC7BC,cAAAA,EACAE,gBAAiBzC,KAAKc,SAGlBoB,EAAqB,CACzBG,KAAM5C,mBAAW+C,QACjBF,QAAAA,EACAS,QAAAA,GAGIS,EAAeC,SAAMC,UACzB,MAAMR,QAAgB9C,GACpB,IAAMJ,KAAKe,QAAQoC,UAAUD,QAAQpC,EAASqB,KAAKiB,UAAUlB,MAG/D,OAAIgB,aAAmBvD,OACrBqC,EAAE,kCAAmC,CAAEkB,QAAAA,EAAShB,OAAAA,IACzCN,QAAQyB,OAAOH,EAAQpD,SAGzB8B,QAAQ0B,aAGjB,OAAOK,KAAG,MAAMd,KACde,cAAYL,GAAa,IAAOM,aAAW,IAAIlE,MAAM,2BACrDmE,YAAS,IAAMC,gBAAc,CAC3B/D,KAAKgE,iBAAqBhE,KAAKc,SAAS+B,KACtCC,UACGZ,GACCA,EAAOG,OAAS5C,mBAAWwD,UAAYf,EAAOI,QAAQC,gBAAkBA,KAG9EiB,MAEF1B,OAAI,EAAEI,KAAYA,IAClB+B,UACAH,YAAU5B,GAAWA,EAAOI,QAAQU,gBAChCa,aAC0B,iBAAnB3B,EAAOa,QACV,IAAIrC,EAAcwB,EAAOa,SACzB,IAAIpD,MAAM,2BAEdgE,KAAGzB,KAEPJ,OAAII,GAAUA,EAAOa,WACrBmB,YAGJ7C,gBACE,OAAOrB,KAAKmE,kBAGd9C,cAAc+C,GACZpE,KAAKmE,kBAAoBC,EAEzBpE,KAAKqE,uBAAuBC,cAC5BtE,KAAKqE,sBAAwBrE,KAAKgE,iBAAiBhE,KAAKc,SAAS+B,KAC/DC,UAAQZ,GAAoCA,EAAOG,OAAS5C,mBAAW+C,UACvEsB,YAASS,GAAOR,gBAAc,CAC5BJ,KAAGY,GACHd,SAAMC,SAAYtD,GAAS,IAAMJ,KAAKmE,oBAAoBnE,KAAKc,QAASyD,EAAIxB,iBAE9Ee,YAAS,EAAES,EAAKjE,KAASmD,SAAMC,SAAYtD,GAAS,IAAMJ,KAAKwE,MAAMD,EAAKjE,UAC1EyB,YAGJT,kBACE,OAAOtB,KAAKyE,oBAGdnD,gBAAgB8C,GACdpE,KAAKyE,oBAAsBL,EAE3BpE,KAAK0E,yBAAyBJ,cAC9BtE,KAAK0E,wBAA0B1E,KAAK2C,eAAeE,KACjDC,UAAO6B,GAAKA,EAAEzC,OAAOG,OAAS5C,mBAAWiD,YACzCkC,OAAI,EAAG9D,QAAAA,EAASoB,OAAAA,KAAalC,KAAKyE,sBAAsB3D,EAASoB,EAAOa,YACxEhB"}