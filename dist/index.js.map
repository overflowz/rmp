{"version":3,"file":"index.js","sources":["../src/core/interface.ts","../src/utils/tryCatch.ts","../src/core/rmp.ts"],"sourcesContent":[null,null,null],"names":["PacketType","TryCatchError","Error","[object Object]","message","origin","super","this","name","captureStackTrace","err","tryCatch","fn","res","then","catch","from","DEBUG_NS","ULID","monotonicFactory","channel","adapter","Subject","onMessage","bind","request","broadcast","onRequest","onBroadcast","subClient","subscribeTo","instance","channelsUniq","Set","Promise","all","map","subscribe","d","debug","packet","JSON","parse","type","headers","correlationId","Request","responseChannel","Broadcast","messageStream$","next","pipe","filter","payload","Response","publish","pubClient","stringify","reject","resolve","timeoutMs","sendMessage$","defer","async","combineLatest","getMessageStream","timeoutWith","throwError","first","toPromise","callback","onRequestCallback","mergeMap","req","of","reply","onBroadcastCallback","f","tap"],"mappings":"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"}