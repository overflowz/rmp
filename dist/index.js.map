{"version":3,"file":"index.js","sources":["../src/core/interface.ts","../src/utils/tryCatch.ts","../src/core/rmp.ts"],"sourcesContent":[null,null,null],"names":["PacketType","TryCatchError","Error","[object Object]","message","origin","super","this","name","captureStackTrace","err","tryCatch","fn","res","then","catch","from","DEBUG_NS","ULID","monotonicFactory","channel","adapter","Subject","onMessage","bind","request","broadcast","onRequest","onBroadcast","subClient","subscribeTo","instance","channelsUniq","Set","Promise","all","map","subscribe","d","debug","packet","JSON","parse","type","headers","correlationId","Request","responseChannel","Broadcast","messageStream$","next","pipe","filter","payload","isErrorResponse","Response","publish","pubClient","stringify","reject","resolve","timeoutMs","sendMessage$","defer","async","of","timeoutWith","throwError","mergeMap","combineLatest","getMessageStream","first","toPromise","onRequestCallback","callback","onRequestSubscription","unsubscribe","req","reply","onBroadcastCallback","onBroadcastSubscription","f","tap"],"mappings":"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"}